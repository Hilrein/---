{% extends 'base.html' %}
{% load static %}

{% block content %}
<main>
  <div class="hero-section animated fadeIn">
    <h1>SaparTime - –°–∞—è—Ö–∞—Ç—ã“£—ã–∑ –±—ñ–∑–¥—ñ“£ “õ–æ–ª—ã–º—ã–∑–¥–∞!</h1>
    <p class="hero-description">“ö–∞–∑–∞“õ—Å—Ç–∞–Ω–Ω—ã“£ –∫–µ–∑ –∫–µ–ª–≥–µ–Ω “õ–∞–ª–∞—Å—ã–Ω–∞ –±–∏–ª–µ—Ç—Ç–µ—Ä–¥—ñ –∂—ã–ª–¥–∞–º –∂”ô–Ω–µ —ã“£“ì–∞–π–ª—ã —Å–∞—Ç—ã–ø –∞–ª—ã“£—ã–∑</p>
  </div>

  <!-- –£–ª—É—á—à–µ–Ω–Ω—ã–π –±–ª–æ–∫ –ø–æ–∏—Å–∫–∞ –±–∏–ª–µ—Ç–æ–≤ -->
  <div class="search-container animated fadeInUp">
    <form method="POST" action="{% url 'find_trains' %}" class="modern-search-form">
      {% csrf_token %}
      <section id="search" class="search-card">
        <div class="search-header">
          <h2>–ë–∏–ª–µ—Ç—Ç–µ—Ä–¥—ñ —ñ–∑–¥–µ—É</h2>
          <p class="search-subtitle">–ë–∞“ì—ã—Ç—Ç—ã, –∫“Ø–Ω–¥—ñ —Ç–∞“£–¥–∞–ø, –±–∏–ª–µ—Ç—Ç–µ—Ä–¥—ñ —ñ–∑–¥–µ“£—ñ–∑</p>
        </div>
        
        <div class="search-body">
          <div class="direction-container">
            <div class="direction-field">
              <label class="search-label" for="from_city">
                <span class="icon-wrapper">
                  <span class="departure-icon"></span>
                </span>
                <span>“ö–∞–π–¥–∞–Ω:</span>
              </label>
              <select class="search-select" id="from_city" name="from_city" required>
                <option value="" selected disabled hidden>“ö–∞–ª–∞–Ω—ã —Ç–∞“£–¥–∞“£—ã–∑</option>
                {% for from_city in from_city %}
                  <option value="{{ from_city.city }}">{{ from_city.city }}</option>
                {% endfor %}
              </select>
            </div>
            
            <div class="direction-switcher" id="directionSwitcher">
              <button type="button" class="switch-button" aria-label="–ë–∞“ì—ã—Ç—Ç–∞—Ä–¥—ã –∞—É—ã—Å—Ç—ã—Ä—É">
                <span class="switch-icon">‚áÑ</span>
              </button>
            </div>
            
            <div class="direction-field">
              <label class="search-label" for="to_city">
                <span class="icon-wrapper">
                  <span class="arrival-icon"></span>
                </span>
                <span>“ö–∞–π–¥–∞:</span>
              </label>
              <select class="search-select" id="to_city" name="to_city" required>
                <option value="" selected disabled hidden>“ö–∞–ª–∞–Ω—ã —Ç–∞“£–¥–∞“£—ã–∑</option>
                {% for to_city in to_city %}
                  <option value="{{ to_city.city }}">{{ to_city.city }}</option>
                {% endfor %}
              </select>
            </div>
          </div>
          
          <div class="date-container">
            <label class="search-label" for="date">
              <span class="icon-wrapper">
                <span class="calendar-icon"></span>
              </span>
              <span>–ñ–æ–ª –∂“Ø—Ä—É –∫“Ø–Ω—ñ:</span>
            </label>
            <input type="date" id="date" name="date" class="search-input" required>
            <div class="date-hint">
              <span id="selectedDateText">–ö“Ø–Ω–¥—ñ —Ç–∞“£–¥–∞“£—ã–∑</span>
            </div>
          </div>
        </div>
        
        <div class="search-footer">
          <button type="submit" class="search-button pulse-animation">
            <span class="search-icon"></span>
            <span>–ë–∏–ª–µ—Ç—Ç–µ—Ä–¥—ñ —ñ–∑–¥–µ—É</span>
          </button>
          <div class="search-tips">
            <div class="tip-text">
              <span class="tip-icon">üí°</span>
              <span>–ö–µ“£–µ—Å: –±–∏–ª–µ—Ç—Ç–µ—Ä–¥—ñ –∞–ª–¥—ã–Ω –∞–ª–∞ –±—Ä–æ–Ω–¥–∞“£—ã–∑</span>
            </div>
          </div>
        </div>
      </section>
    </form>
  </div>

  <div class="popular-routes">
    <h3>–¢–∞–Ω—ã–º–∞–ª –±–∞“ì—ã—Ç—Ç–∞—Ä</h3>
    <div class="route-list">
      <div class="route-card">
        <div class="route-icon">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M4 15V18C4 18.5523 4.44772 19 5 19H19C19.5523 19 20 18.5523 20 18V15" stroke="#007bff" stroke-width="2" stroke-linecap="round"/>
            <rect x="6" y="9" width="12" height="6" rx="1" stroke="#007bff" stroke-width="2"/>
            <path d="M8 9V6C8 4.89543 8.89543 4 10 4H14C15.1046 4 16 4.89543 16 6V9" stroke="#007bff" stroke-width="2"/>
            <circle cx="9" cy="15" r="1" fill="#007bff"/>
            <circle cx="15" cy="15" r="1" fill="#007bff"/>
          </svg>
        </div>
        <div class="route-cities">
          <div class="route-info">
            <span>–ê—Å—Ç–∞–Ω–∞</span>
            <span class="route-arrow">‚Üí</span>
            <span>–ê–ª–º–∞—Ç—ã</span>
          </div>
        </div>
        <div class="route-details">
          <div class="route-time"><i class="time-icon"></i>15 —Å–∞“ì–∞—Ç</div>
          <div class="route-distance"><i class="distance-icon"></i>1300 –∫–º</div>
        </div>
        <div class="route-price">12,000 ‚Ç∏</div>
        <a href="#" class="route-button">–¢–∞“£–¥–∞—É</a>
      </div>

      <div class="route-card">
        <div class="route-icon">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M4 15V18C4 18.5523 4.44772 19 5 19H19C19.5523 19 20 18.5523 20 18V15" stroke="#007bff" stroke-width="2" stroke-linecap="round"/>
            <rect x="6" y="9" width="12" height="6" rx="1" stroke="#007bff" stroke-width="2"/>
            <path d="M8 9V6C8 4.89543 8.89543 4 10 4H14C15.1046 4 16 4.89543 16 6V9" stroke="#007bff" stroke-width="2"/>
            <circle cx="9" cy="15" r="1" fill="#007bff"/>
            <circle cx="15" cy="15" r="1" fill="#007bff"/>
          </svg>
        </div>
        <div class="route-cities">
          <div class="route-info">
            <span>“ö–∞—Ä–∞“ì–∞–Ω–¥—ã</span>
            <span class="route-arrow">‚Üí</span>
            <span>–ê—Å—Ç–∞–Ω–∞</span>
          </div>
        </div>
        <div class="route-details">
          <div class="route-time"><i class="time-icon"></i>4 —Å–∞“ì–∞—Ç</div>
          <div class="route-distance"><i class="distance-icon"></i>220 –∫–º</div>
        </div>
        <div class="route-price">8,500 ‚Ç∏</div>
        <a href="#" class="route-button">–¢–∞“£–¥–∞—É</a>
      </div>

      <div class="route-card">
        <div class="route-icon">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M4 15V18C4 18.5523 4.44772 19 5 19H19C19.5523 19 20 18.5523 20 18V15" stroke="#007bff" stroke-width="2" stroke-linecap="round"/>
            <rect x="6" y="9" width="12" height="6" rx="1" stroke="#007bff" stroke-width="2"/>
            <path d="M8 9V6C8 4.89543 8.89543 4 10 4H14C15.1046 4 16 4.89543 16 6V9" stroke="#007bff" stroke-width="2"/>
            <circle cx="9" cy="15" r="1" fill="#007bff"/>
            <circle cx="15" cy="15" r="1" fill="#007bff"/>
          </svg>
        </div>
        <div class="route-cities">
          <div class="route-info">
            <span>–ê–ª–º–∞—Ç—ã</span>
            <span class="route-arrow">‚Üí</span>
            <span>–®—ã–º–∫–µ–Ω—Ç</span>
          </div>
        </div>
        <div class="route-details">
          <div class="route-time"><i class="time-icon"></i>10 —Å–∞“ì–∞—Ç</div>
          <div class="route-distance"><i class="distance-icon"></i>700 –∫–º</div>
        </div>
        <div class="route-price">10,500 ‚Ç∏</div>
        <a href="#" class="route-button">–¢–∞“£–¥–∞—É</a>
      </div>
    </div>
  </div>

  <div class="benefits-section">
    <h3>–ë—ñ–∑–¥—ñ“£ –∞—Ä—Ç—ã“õ—à—ã–ª—ã“õ—Ç–∞—Ä—ã–º—ã–∑</h3>
    <div class="benefits-container">
      <div class="benefit-card">
        <div class="benefit-icon">
          <i class="benefit-icon-fast"></i>
        </div>
        <h4>–ñ—ã–ª–¥–∞–º –±—Ä–æ–Ω–¥–∞—É</h4>
        <p>–ë—ñ—Ä–Ω–µ—à–µ –º–∏–Ω—É—Ç —ñ—à—ñ–Ω–¥–µ –±–∏–ª–µ—Ç—Ç—ñ —Ç–∞“£–¥–∞–ø, —Å–∞—Ç—ã–ø –∞–ª—ã“£—ã–∑</p>
      </div>
      
      <div class="benefit-card">
        <div class="benefit-icon">
          <i class="benefit-icon-price"></i>
        </div>
        <h4>–¢–∏—ñ–º–¥—ñ –±–∞“ì–∞–ª–∞—Ä</h4>
        <p>–ë—ñ–∑ ”ô—Ä“õ–∞—à–∞–Ω –µ“£ –∂–∞“õ—Å—ã –±–∞“ì–∞–ª–∞—Ä–¥—ã “±—Å—ã–Ω–∞–º—ã–∑</p>
      </div>
      
      <div class="benefit-card">
        <div class="benefit-icon">
          <i class="benefit-icon-support"></i>
        </div>
        <h4>24/7 “õ–æ–ª–¥–∞—É</h4>
        <p>–ë—ñ–∑–¥—ñ“£ “õ–æ–ª–¥–∞—É “õ—ã–∑–º–µ—Ç—ñ ”ô—Ä“õ–∞—à–∞–Ω –∫”©–º–µ–∫—Ç–µ—Å—É–≥–µ –¥–∞–π—ã–Ω</p>
      </div>
    </div>
  </div>
</main>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤
    function animateElements() {
      const elements = document.querySelectorAll('.animated');
      elements.forEach((element, index) => {
        setTimeout(() => {
          element.classList.add('visible');
        }, 200 * index);
      });
    }
    
    animateElements();
    
    // –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π
    const directionSwitcher = document.getElementById('directionSwitcher');
    if (directionSwitcher) {
      directionSwitcher.addEventListener('click', function() {
        const fromCity = document.getElementById('from_city');
        const toCity = document.getElementById('to_city');
        
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è
        const fromValue = fromCity.value;
        const toValue = toCity.value;
        
        // –ú–µ–Ω—è–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –º–µ—Å—Ç–∞–º–∏
        fromCity.value = toValue;
        toCity.value = fromValue;
        
        // –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –∫–Ω–æ–ø–∫–∏
        this.classList.add('rotate');
        setTimeout(() => {
          this.classList.remove('rotate');
        }, 500);
      });
    }
    
    // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –¥–∞—Ç—ã –≤ –ø–æ–Ω—è—Ç–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
    const dateInput = document.getElementById('date');
    const selectedDateText = document.getElementById('selectedDateText');
    
    if (dateInput && selectedDateText) {
      // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –¥–∞—Ç—É - —Å–µ–≥–æ–¥–Ω—è
      const today = new Date();
      const yyyy = today.getFullYear();
      const mm = String(today.getMonth() + 1).padStart(2, '0');
      const dd = String(today.getDate()).padStart(2, '0');
      dateInput.min = `${yyyy}-${mm}-${dd}`;
      
      // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞—Ç—ã
      dateInput.addEventListener('change', function() {
        if (this.value) {
          const dateParts = this.value.split('-');
          const year = dateParts[0];
          const month = dateParts[1];
          const day = dateParts[2];
          
          // –ù–∞–∑–≤–∞–Ω–∏—è –º–µ—Å—è—Ü–µ–≤ –Ω–∞ –∫–∞–∑–∞—Ö—Å–∫–æ–º
          const monthNames = [
            '“õ–∞“£—Ç–∞—Ä', '–∞“õ–ø–∞–Ω', '–Ω–∞—É—Ä—ã–∑', '—Å”ô—É—ñ—Ä', '–º–∞–º—ã—Ä', '–º–∞—É—Å—ã–º',
            '—à—ñ–ª–¥–µ', '—Ç–∞–º—ã–∑', '“õ—ã—Ä–∫“Ø–π–µ–∫', '“õ–∞–∑–∞–Ω', '“õ–∞—Ä–∞—à–∞', '–∂–µ–ª—Ç–æ“õ—Å–∞–Ω'
          ];
          
          const monthName = monthNames[parseInt(month) - 1];
          selectedDateText.textContent = `${day} ${monthName}, ${year} –∂.`;
          
          // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –¥–ª—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏
          selectedDateText.classList.add('date-selected');
        } else {
          selectedDateText.textContent = '–ö“Ø–Ω–¥—ñ —Ç–∞“£–¥–∞“£—ã–∑';
          selectedDateText.classList.remove('date-selected');
        }
      });
    }
    
    // –ê–Ω–∏–º–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏
    const searchButton = document.querySelector('.search-button');
    if (searchButton) {
      searchButton.addEventListener('mouseover', function() {
        this.classList.add('pulse');
      });
      
      searchButton.addEventListener('mouseout', function() {
        this.classList.remove('pulse');
      });
    }
  });
</script>
{% endblock content %}